Description: This makes sure that DESTDIR
  is not overwritten in the Makefile.
Forwarded: doesn't make sense upstream
Author: Ruben Undheim <ruben.undheim@gmail.com>
Index: yosys/Makefile
===================================================================
--- yosys.orig/Makefile	2015-10-07 23:54:36.805441499 +0400
+++ yosys/Makefile	2015-10-07 23:55:47.877272796 +0400
@@ -18,11 +18,11 @@
 ENABLE_GPROF := 0
 ENABLE_NDEBUG := 0
 
-DESTDIR := /usr/local
+#DESTDIR := /usr/local
 INSTALL_SUDO :=
 
-TARGET_BINDIR := $(DESTDIR)/bin
-TARGET_DATDIR := $(DESTDIR)/share/yosys
+TARGET_BINDIR := $(DESTDIR)/usr/bin
+TARGET_DATDIR := $(DESTDIR)/usr/share/yosys
 
 EXE =
 OBJS =
@@ -39,7 +39,7 @@
 YOSYS_SRC := $(dir $(firstword $(MAKEFILE_LIST)))
 VPATH := $(YOSYS_SRC)
 
-CXXFLAGS = -Wall -Wextra -ggdb -I. -I"$(YOSYS_SRC)" -MD -D_YOSYS_ -fPIC -I$(DESTDIR)/include
+CXXFLAGS = -Wall -Wextra -ggdb -I. -I"$(YOSYS_SRC)" -MD -D_YOSYS_ -fPIC -I$(DESTDIR)/usr/include
 LDFLAGS = -L$(DESTDIR)/lib
 LDLIBS = -lstdc++ -lm
 SED = sed
@@ -378,10 +378,10 @@
 	@echo ""
 
 install: $(TARGETS) $(EXTRA_TARGETS)
-	$(INSTALL_SUDO) mkdir -p $(DESTDIR)/bin
-	$(INSTALL_SUDO) install $(TARGETS) $(DESTDIR)/bin/
-	$(INSTALL_SUDO) mkdir -p $(DESTDIR)/share/yosys
-	$(INSTALL_SUDO) cp -r share/. $(DESTDIR)/share/yosys/.
+	$(INSTALL_SUDO) mkdir -p $(DESTDIR)/usr/bin
+	$(INSTALL_SUDO) install $(TARGETS) $(DESTDIR)/usr/bin/
+	$(INSTALL_SUDO) mkdir -p $(DESTDIR)/usr/share/yosys
+	$(INSTALL_SUDO) cp -r share/. $(DESTDIR)/usr/share/yosys/.
 ifeq ($(ENABLE_LIBYOSYS),1)
 	$(INSTALL_SUDO) cp libyosys.so $(DESTDIR)/lib/
 	$(INSTALL_SUDO) ldconfig
