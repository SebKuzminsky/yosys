Description: This makes sure that DESTDIR
  is not overwritten in the Makefile.
Forwarded: doesn't make sense upstream
Author: Ruben Undheim <ruben.undheim@gmail.com>
Index: yosys/Makefile
===================================================================
--- yosys.orig/Makefile	2015-07-24 12:10:09.835533316 +0200
+++ yosys/Makefile	2015-07-24 12:10:09.831532775 +0200
@@ -17,11 +17,11 @@
 ENABLE_GPROF := 0
 ENABLE_NDEBUG := 0
 
-DESTDIR := /usr/local
+#DESTDIR := /usr/local
 INSTALL_SUDO :=
 
-TARGET_BINDIR := $(DESTDIR)/bin
-TARGET_DATDIR := $(DESTDIR)/share/yosys
+TARGET_BINDIR := $(DESTDIR)/usr/bin
+TARGET_DATDIR := $(DESTDIR)/usr/share/yosys
 
 EXE =
 OBJS =
@@ -36,7 +36,7 @@
 all: top-all
 
 YOSYS_SRC := $(shell pwd)
-CXXFLAGS = -Wall -Wextra -ggdb -I"$(YOSYS_SRC)" -MD -D_YOSYS_ -fPIC -I$(DESTDIR)/include
+CXXFLAGS = -Wall -Wextra -ggdb -I"$(YOSYS_SRC)" -MD -D_YOSYS_ -fPIC -I$(DESTDIR)/usr/include
 LDFLAGS = -L$(DESTDIR)/lib
 LDLIBS = -lstdc++ -lm
 SED = sed
@@ -359,10 +359,10 @@
 	@echo ""
 
 install: $(TARGETS) $(EXTRA_TARGETS)
-	$(INSTALL_SUDO) mkdir -p $(DESTDIR)/bin
-	$(INSTALL_SUDO) install $(TARGETS) $(DESTDIR)/bin/
-	$(INSTALL_SUDO) mkdir -p $(DESTDIR)/share/yosys
-	$(INSTALL_SUDO) cp -r share/. $(DESTDIR)/share/yosys/.
+	$(INSTALL_SUDO) mkdir -p $(DESTDIR)/usr/bin
+	$(INSTALL_SUDO) install $(TARGETS) $(DESTDIR)/usr/bin/
+	$(INSTALL_SUDO) mkdir -p $(DESTDIR)/usr/share/yosys
+	$(INSTALL_SUDO) cp -r share/. $(DESTDIR)/usr/share/yosys/.
 
 uninstall:
 	$(INSTALL_SUDO) rm -vf $(addprefix $(DESTDIR)/bin/,$(notdir $(TARGETS)))
